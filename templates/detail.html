<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8"/>
        <meta title="viewport" content="width=device-width, initial-scale=1.0"/>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
        <link href="https://getbootstrap.com/docs/5.3/assets/css/docs.css" rel="stylesheet">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.8.0/css/bulma.min.css"/>
        <script defer src="https://use.fontawesome.com/releases/v6.4.0/js/all.js"></script>

        <link href="../static/css/main.css" rel="stylesheet" />
        <title>정글고리</title>
        <script>
            $(document).ready(function () {
                var imgFlag = $("#user_img").val() =="" ? true : false;
                var imgUrl = imgFlag? "../static/img/default_image.jpg": "../static/upload/"+$("#user_id").val()+"."+$("#user_img").val()
                $("#detail_image").attr('src', imgUrl);
            });

            function like_btn(){
                $.ajax({
                    type: "GET",
                    url: "/detail/like?id="+$("#user_id").val(),
                    contentType : "application/json",
                    data: {},
                    success: function (response) {
                        console.log(response)
                        if (response['result'] == 'success') {
                            $("#num_like").text(response['like_cnt']+" 좋아요");
                        } else {
                            alert(response['msg'])
                        }
                    }
                });
            };
        </script>
    </head>
    <body>
        <div class="mx-auto sorter-box mt-4">
            <input type="hidden" value="{{ user_data.img }}" id="user_img">
            <input type="hidden" value="{{ user_data.user_id }}" id="user_id">
            <div class="">
                <span class="justify-content-end">
                    <div class="card" style="height: 400px; width: 800px; display: inline-block;">
                        <div class="div-left" style="width:35%; height: 100%; float: left;">
                            <div id="image_container" class="" style="width: 100%; height: 70%; padding-left: 7%;margin-top: 10%;">
                                <img src="" id="detail_image" style="width: 100%; height: 100%;">
                            </div>
                            <div class="likeSection"style="width: 100%; height: 20%;text-align: center; padding-top: 10%;">
                                <a herf="javascript:void(0);" class="btn btn-primary mx-auto" value="" style="width: 50%;" onclick="like_btn()"><span id="num_like">{{user_data.like}} 좋아요<span> </a>
                            </div>
                        </div>
                        <div class="div-left" style="width:65%; float: left; padding-left:10%; padding-right:5%;height: 100%;">
                            <div style="width: 100%;">
                                <div style="margin-top: 5%;">
                                    <table>
                                        <tr>
                                            <th style="padding:6px;">
                                                이름
                                            </th>
                                            <td style="padding:6px;">
                                                <input type="text" id="name" value="{{user_data.user_name}}" style="border:0px; background-color: white;" disabled >
                                            </td>
                                        </tr>
                                        <tr>
                                            <th style="padding:6px;">
                                                학교
                                            </th>
                                            <td style="padding:6px;">
                                                <input type="text" id="univ" value="{{user_data.univ}}" style="border:0px; background-color: white;" disabled>
                                            </td>
                                        </tr>
                                        <tr>
                                            <th style="padding:6px;">
                                                학과
                                            </th>
                                            <td style="padding:6px;">
                                                <input type="text" id="major" value="{{user_data.major}}" style="border:0px; background-color: white;" disabled>
                                            </td>
                                        </tr>
                                        <tr>
                                            <th style="padding:6px;">
                                                MBTI
                                            </th>
                                            <td style="padding:6px;">
                                                <input type="text" id="MBTI" value="{{user_data.mbti}}" style="border:0px; background-color: white;" disabled>
                                            </td>
                                        </tr>
                                        <tr>
                                            <th style="padding:6px;">
                                                거주지
                                            </th>
                                            <td style="padding:6px;">
                                                <input type="text" id="region" value="{{user_data.region}}" style="border:0px; background-color: white;" disabled>
                                            </td>
                                        </tr>
                                        <tr>
                                        </tr>
                                        <tr>
                                            <th style="padding:6px;">
                                                흡연여부
                                            </th>
                                            <td style="padding:6px;">
                                                <input type="text" id="smoking" value="{{user_data.smoking}}" style="border:0px; background-color: white;" disabled>
                                            </td>
                                        </tr>
                                        <tr>
                                            <th style="padding:6px;">
                                                성별
                                            </th>
                                            <td style="padding:6px;">
                                                <input type="text" id="gender" value="{{user_data.gender}}" style="border:0px; background-color: white;" disabled>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </span>
            </div>
        </div>
    </body>
</html>